<svg id="mermaid-1614150377511" width="100%" xmlns="http://www.w3.org/2000/svg" height="100%" style="max-width:3430px;" viewBox="-50 -10 3430 2661"><style>#mermaid-1614150377511{font-family:"trebuchet ms",verdana,arial;font-size:16px;fill:#333;}#mermaid-1614150377511 .error-icon{fill:#552222;}#mermaid-1614150377511 .error-text{fill:#552222;stroke:#552222;}#mermaid-1614150377511 .edge-thickness-normal{stroke-width:2px;}#mermaid-1614150377511 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1614150377511 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1614150377511 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1614150377511 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1614150377511 .marker{fill:#333333;}#mermaid-1614150377511 .marker.cross{stroke:#333333;}#mermaid-1614150377511 svg{font-family:"trebuchet ms",verdana,arial;font-size:16px;}#mermaid-1614150377511 .actor{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1614150377511 text.actor &gt; tspan{fill:black;stroke:none;}#mermaid-1614150377511 .actor-line{stroke:grey;}#mermaid-1614150377511 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1614150377511 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1614150377511 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1614150377511 .sequenceNumber{fill:white;}#mermaid-1614150377511 #sequencenumber{fill:#333;}#mermaid-1614150377511 #crosshead path{fill:#333;stroke:#333;}#mermaid-1614150377511 .messageText{fill:#333;stroke:#333;}#mermaid-1614150377511 .labelBox{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1614150377511 .labelText,#mermaid-1614150377511 .labelText &gt; tspan{fill:black;stroke:none;}#mermaid-1614150377511 .loopText,#mermaid-1614150377511 .loopText &gt; tspan{fill:black;stroke:none;}#mermaid-1614150377511 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:hsl(259.6261682243,59.7765363128%,87.9019607843%);}#mermaid-1614150377511 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1614150377511 .noteText,#mermaid-1614150377511 .noteText &gt; tspan{fill:black;stroke:none;}#mermaid-1614150377511 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1614150377511 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1614150377511 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1614150377511:root{--mermaid-font-family:"trebuchet ms",verdana,arial;}#mermaid-1614150377511 sequence{fill:apa;}</style><g/><g><line id="actor0" x1="75" y1="5" x2="75" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="75" dy="0">Contract Owner</tspan></text></g><g><line id="actor1" x1="598" y1="5" x2="598" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="523" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="598" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="598" dy="0">MACIFactory</tspan></text></g><g><line id="actor2" x1="854" y1="5" x2="854" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="779" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="854" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="854" dy="0">MACI</tspan></text></g><g><line id="actor3" x1="1054" y1="5" x2="1054" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="979" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="1054" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1054" dy="0">SignUpGateKeeper</tspan></text></g><g><line id="actor4" x1="1254" y1="5" x2="1254" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="1179" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="1254" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1254" dy="0">SignUpToken</tspan></text></g><g><line id="actor5" x1="1480.5" y1="5" x2="1480.5" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="1379" y="0" fill="#eaeaea" stroke="#666" width="203" height="65" rx="3" ry="3" class="actor"/><text x="1480.5" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1480.5" dy="0">ConstantinitialVoiceCreditProxy</tspan></text></g><g><line id="actor6" x1="1707" y1="5" x2="1707" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="1632" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="1707" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1707" dy="0">CREAMFactory</tspan></text></g><g><line id="actor7" x1="2043" y1="5" x2="2043" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="1968" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="2043" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="2043" dy="0">CREAM</tspan></text></g><g><line id="actor8" x1="2243" y1="5" x2="2243" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="2168" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="2243" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="2243" dy="0">VotingToken</tspan></text></g><g><line id="actor9" x1="2443" y1="5" x2="2443" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="2368" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="2443" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="2443" dy="0">Recipients</tspan></text></g><g><line id="actor10" x1="2643" y1="5" x2="2643" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="2568" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="2643" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="2643" dy="0">Voter</tspan></text></g><g><line id="actor11" x1="2871" y1="5" x2="2871" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="2796" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="2871" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="2871" dy="0">Voter'</tspan></text></g><g><line id="actor12" x1="3255" y1="5" x2="3255" y2="2650" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="3180" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="3255" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="3255" dy="0">Coordinator</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"/></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"/><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"/></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"/></marker></defs><text x="337" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">deploy MACI factory</text><line x1="75" y1="113" x2="598" y2="113" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="337" y="128" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">MACIFactory instance address</text><line x1="598" y1="161" x2="75" y2="161" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="891" y="176" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">deploy CREAM factory</text><line x1="75" y1="209" x2="1707" y2="209" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="891" y="224" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">CREAMFactory instance address</text><line x1="1707" y1="257" x2="75" y2="257" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="337" y="272" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">transfer ownership to CREAMFactory (call transterOwnership())</text><line x1="75" y1="305" x2="598" y2="305" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="891" y="365" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">set MACI parameters</text><line x1="75" y1="398" x2="1707" y2="398" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><line x1="65" y1="315" x2="1717" y2="315" class="loopLine"/><line x1="1717" y1="315" x2="1717" y2="408" class="loopLine"/><line x1="65" y1="408" x2="1717" y2="408" class="loopLine"/><line x1="65" y1="315" x2="65" y2="408" class="loopLine"/><polygon points="65,315 115,315 115,328 106.6,335 65,335" class="labelBox"/><text x="90" y="328" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">opt</text><text x="916" y="333" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;"><tspan x="916">[MACI parameters]</tspan></text></g><text x="1665" y="423" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">provide public key</text><line x1="3255" y1="456" x2="75" y2="456" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="1159" y="516" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">deploy VotingToken</text><line x1="75" y1="549" x2="2243" y2="549" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="665" y="564" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">deploy SignUpToken</text><line x1="75" y1="597" x2="1254" y2="597" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="565" y="612" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">deploy SignUpGateKeeper contract</text><line x1="75" y1="645" x2="1054" y2="645" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="778" y="660" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">deploy ConstantinitialVoiceCreditProxy contract</text><line x1="75" y1="693" x2="1480.5" y2="693" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="891" y="708" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">(call createCream())</text><line x1="75" y1="741" x2="1707" y2="741" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="1875" y="756" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">deploy new CREAM instance</text><line x1="1707" y1="789" x2="2043" y2="789" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="1321" y="804" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">(call deployMACI())</text><line x1="2043" y1="837" x2="598" y2="837" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="726" y="852" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">deploy new MACI instance</text><line x1="598" y1="885" x2="854" y2="885" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="1281" y="900" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">MACI instance address</text><line x1="854" y1="933" x2="1707" y2="933" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="1875" y="948" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">Link MACI and CREAM (call setMaci())</text><line x1="1707" y1="981" x2="2043" y2="981" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="891" y="996" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">CREAM instance address</text><line x1="1707" y1="1029" x2="75" y2="1029" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="665" y="1044" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">transfer ownership to CREAM instance address</text><line x1="75" y1="1077" x2="1254" y2="1077" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="1059" y="1137" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">transfer VotingToken (call safeTransferFrom())</text><line x1="75" y1="1170" x2="2043" y2="1170" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="2343" y="1185" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">VotingToken</text><line x1="2043" y1="1218" x2="2643" y2="1218" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><line x1="65" y1="1087" x2="2653" y2="1087" class="loopLine"/><line x1="2653" y1="1087" x2="2653" y2="1228" class="loopLine"/><line x1="65" y1="1228" x2="2653" y2="1228" class="loopLine"/><line x1="65" y1="1087" x2="65" y2="1228" class="loopLine"/><polygon points="65,1087 115,1087 115,1100 106.6,1107 65,1107" class="labelBox"/><text x="90" y="1100" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">loop</text><text x="1384" y="1105" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;"><tspan x="1384">[*TODO* sign up authentication]</tspan></text></g><text x="2643" y="1288" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">generate nullifier and secret (commitment)</text><path d="M 2643,1321 C 2703,1311 2703,1351 2643,1341" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="2343" y="1366" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">deposit VotingToken (call deposit())</text><line x1="2643" y1="1399" x2="2043" y2="1399" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="2757" y="1414" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">Switch wallet account</text><line x1="2643" y1="1447" x2="2871" y2="1447" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><line x1="2033" y1="1238" x2="2881" y2="1238" class="loopLine"/><line x1="2881" y1="1238" x2="2881" y2="1457" class="loopLine"/><line x1="2033" y1="1457" x2="2881" y2="1457" class="loopLine"/><line x1="2033" y1="1238" x2="2033" y2="1457" class="loopLine"/><polygon points="2033,1238 2083,1238 2083,1251 2074.6,1258 2033,1258" class="labelBox"/><text x="2058" y="1251" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">loop</text><text x="2482" y="1256" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;"><tspan x="2482">[mixer round]</tspan></text></g><text x="2457" y="1517" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">sign up (call signUpMaci())</text><line x1="2871" y1="1550" x2="2043" y2="1550" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="1449" y="1565" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">(call signUp())</text><line x1="2043" y1="1598" x2="854" y2="1598" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="2457" y="1613" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">SignUpToken</text><line x1="2043" y1="1646" x2="2871" y2="1646" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="2871" y="1661" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">Voter' creates encrypted message(s)</text><path d="M 2871,1694 C 2931,1684 2931,1724 2871,1714" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><text x="1863" y="1784" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">vote ( call publishMessage() )</text><line x1="2871" y1="1817" x2="854" y2="1817" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="2457" y="1877" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">vote ( call submitMessageBatch() )</text><line x1="2871" y1="1910" x2="2043" y2="1910" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="1449" y="1925" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">call publishMessage()</text><line x1="2043" y1="1958" x2="854" y2="1958" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><line x1="844" y1="1734" x2="2881" y2="1734" class="loopLine"/><line x1="2881" y1="1734" x2="2881" y2="1968" class="loopLine"/><line x1="844" y1="1968" x2="2881" y2="1968" class="loopLine"/><line x1="844" y1="1734" x2="844" y2="1968" class="loopLine"/><line x1="844" y1="1832" x2="2881" y2="1832" class="loopLine" style="stroke-dasharray: 3, 3;"/><polygon points="844,1734 894,1734 894,1747 885.6,1754 844,1754" class="labelBox"/><text x="869" y="1747" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">alt</text><text x="1887.5" y="1752" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;"><tspan x="1887.5">[Single message submission]</tspan></text><text x="1862.5" y="1850" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">[Batch submission]</text></g><g><line x1="834" y1="1467" x2="3011" y2="1467" class="loopLine"/><line x1="3011" y1="1467" x2="3011" y2="1978" class="loopLine"/><line x1="834" y1="1978" x2="3011" y2="1978" class="loopLine"/><line x1="834" y1="1467" x2="834" y2="1978" class="loopLine"/><polygon points="834,1467 884,1467 884,1480 875.6,1487 834,1487" class="labelBox"/><text x="859" y="1480" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">loop</text><text x="1947.5" y="1485" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;"><tspan x="1947.5">[maci round]</tspan></text></g><g><rect x="829" y="1988" fill="#EDF2AE" stroke="#666" width="1239" height="36" rx="0" ry="0" class="note"/><text x="1449" y="1993" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 14px; font-weight: 400;"><tspan x="1449">voting deadline</tspan></text></g><text x="2055" y="2039" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">process messages (call batchProcessMessage())</text><line x1="3255" y1="2072" x2="854" y2="2072" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="2896" y="2082" fill="#EDF2AE" stroke="#666" width="334" height="36" rx="0" ry="0" class="note"/><text x="3063" y="2087" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 14px; font-weight: 400;"><tspan x="3063">coordinator tallies the votes and generates proofs</tspan></text></g><text x="2055" y="2133" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">prove the correctness of vote tally ( call proveVoteTallyBatch() )</text><line x1="3255" y1="2166" x2="854" y2="2166" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="2055" y="2181" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">tally votes</text><line x1="3255" y1="2214" x2="854" y2="2214" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="2055" y="2229" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">tally.json</text><line x1="854" y1="2262" x2="3255" y2="2262" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="2981" y="2272" fill="#EDF2AE" stroke="#666" width="249" height="36" rx="0" ry="0" class="note"/><text x="3106" y="2277" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 14px; font-weight: 400;"><tspan x="3106">coordinator uploads the tally to IPFS</tspan></text></g><text x="2649" y="2323" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">call publishTallyHash()</text><line x1="3255" y1="2356" x2="2043" y2="2356" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="1059" y="2371" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">approve tally result (call aprooveTally())</text><line x1="75" y1="2404" x2="2043" y2="2404" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="2649" y="2464" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">(call withdraw())</text><line x1="3255" y1="2497" x2="2043" y2="2497" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="2243" y="2512" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">transfer VotingToken</text><line x1="2043" y1="2545" x2="2443" y2="2545" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><line x1="2033" y1="2414" x2="3265" y2="2414" class="loopLine"/><line x1="3265" y1="2414" x2="3265" y2="2555" class="loopLine"/><line x1="2033" y1="2555" x2="3265" y2="2555" class="loopLine"/><line x1="2033" y1="2414" x2="2033" y2="2555" class="loopLine"/><polygon points="2033,2414 2083,2414 2083,2427 2074.6,2434 2033,2434" class="labelBox"/><text x="2058" y="2427" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">loop</text><text x="2674" y="2432" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;"><tspan x="2674">[token withdrawal]</tspan></text></g><g><line x1="55" y1="466" x2="3275" y2="466" class="loopLine"/><line x1="3275" y1="466" x2="3275" y2="2565" class="loopLine"/><line x1="55" y1="2565" x2="3275" y2="2565" class="loopLine"/><line x1="55" y1="466" x2="55" y2="2565" class="loopLine"/><polygon points="55,466 105,466 105,479 96.6,486 55,486" class="labelBox"/><text x="80" y="479" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;">loop</text><text x="1690" y="484" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial; font-size: 16px; font-weight: 400;"><tspan x="1690">[create election]</tspan></text></g><g><rect x="0" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="75" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="75" dy="0">Contract Owner</tspan></text></g><g><rect x="523" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="598" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="598" dy="0">MACIFactory</tspan></text></g><g><rect x="779" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="854" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="854" dy="0">MACI</tspan></text></g><g><rect x="979" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="1054" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1054" dy="0">SignUpGateKeeper</tspan></text></g><g><rect x="1179" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="1254" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1254" dy="0">SignUpToken</tspan></text></g><g><rect x="1379" y="2585" fill="#eaeaea" stroke="#666" width="203" height="65" rx="3" ry="3" class="actor"/><text x="1480.5" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1480.5" dy="0">ConstantinitialVoiceCreditProxy</tspan></text></g><g><rect x="1632" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="1707" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1707" dy="0">CREAMFactory</tspan></text></g><g><rect x="1968" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="2043" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="2043" dy="0">CREAM</tspan></text></g><g><rect x="2168" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="2243" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="2243" dy="0">VotingToken</tspan></text></g><g><rect x="2368" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="2443" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="2443" dy="0">Recipients</tspan></text></g><g><rect x="2568" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="2643" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="2643" dy="0">Voter</tspan></text></g><g><rect x="2796" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="2871" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="2871" dy="0">Voter'</tspan></text></g><g><rect x="3180" y="2585" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="3255" y="2617.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="3255" dy="0">Coordinator</tspan></text></g></svg>